var seatData=[[[1,1,1],0,[1,1,1,1],0,[1,1,1,1,1],0,[1,1,1,1,1,1],0,[1,1,1,1,1,1,1],0,[1,1,1,1,1,1,1,1],0,[1,1,1,1,1,1,1,1],0,[1,1,1,1,1,1,1,1,1],0,[1,1,1,1,1,1,1,1,1,1]],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1]];$.fn.seatCreate=function(e){var a,l,i=$.extend({data:[],offset:30,tableWidth:188,tableHeight:188,isCheckout:!0,checkoutNumber:99999999999,isThumbnail:!0,thumbnailRank:.3,thumbnailLongShow:!0,thumbnailWidth:3,eventSeatSuccess:function(e){}},e),c=0,n=0,o={rowsElem:"",seatElem:"",seatBoxElem:$("#seatList"),initScale:1},s=document.getElementById("seatBox"),t=new Hammer(s);t.get("pinch").set({enable:!0}),t.on("pinchmove pinchstart pinchin pinchout",function(e){console.log(e),"pinchstart"==e.type&&(o.initScale=o.scale||1),o.scale=o.initScale*e.scale,a.zoom(o.initScale*e.scale,a.x,a.y,0),a._events.zoomEnd[0](),a._events.scrollEnd[0]()}),$.each(i.data,function(t,e){var s,a,l;o.rowsElem+=(s=t+1,a=e,l="",$.each(a,function(e,s){Array.isArray(s)&&(l="table-row")}),'<div class="seat-row '+l+'">'+s+"</div>"),o.rows=e.length,o.seatElem+='<div class="rows-box clearfix">';var c=0;$.each(e,function(e,s){0!=s&&(c+=1),Array.isArray(s)?o.seatElem+=function(a,l,e){if(10<e.length)return alert("座位数不能大于10");var c='<div class="circle-table circle-table'+e.length+'" style="width:'+i.tableWidth+"px;height:"+i.tableHeight+"px;line-height:"+i.tableHeight+'px">'+(a+1)+"-"+l+"号桌";return $.each(e,function(e,s){var t="";switch(s){case 1:t="sel js_select_click";break;case 2:t="noSel js_select_click";break;case 3:t="yesSel js_select_click"}c+='<span data-seat="'+(a+1)+"-"+l+"-"+(e+1)+'" class="'+t+" circle-seat seat-"+(a+1)+"-"+l+"-"+(e+1)+'"></span>'}),c+="</div>"}(t,c,s):o.seatElem+=function(e,s,t){var a="";switch(t){case 1:a="sel js_select_click";break;case 2:a="noSel js_select_click";break;case 3:a="yesSel js_select_click"}return'<div data-seat="'+(0!=t?e+1+"-"+s:"")+'" class="seats-item seat-'+(0!=t?e+1+"-"+s:"")+" "+a+'">                            <p class="seatName">'+(0!=t?e+1+"-"+s:"")+"                            </p>                        </div>"}(t,c,s)}),o.seatElem+="</div>"}),$(".js_row_box").append(o.rowsElem),o.cols=i.data.length,$(".js_seats_wrapper").append(o.seatElem),$(".js_seats_wrapper").delegate(".js_select_click","tap",function(){if(!(0<$(this).parents(".js_thumbnail_box").length)){var e=this.className.match(/seat-\d*-\d*?[-\d]*/g)[0];return $(this).hasClass("noSel")?layer.msg("此座位已有人，请选择其他座位"):$(this).hasClass("yesSel")?($("."+e).removeClass("yesSel").addClass("sel"),void("function"==typeof i.eventSeatSuccess&&i.eventSeatSuccess($(this),!1))):($("."+e).addClass("yesSel").removeClass("sel"),!i.isCheckout&&1<$(this).parents(".js_seats_wrapper").find(".js_select_click.yesSel").length?($("."+e).removeClass("yesSel").addClass("sel"),layer.msg("每人只能选一个座位")):i.isCheckout&&$(this).parents(".js_seats_wrapper").find(".js_select_click.yesSel").length>i.checkoutNumber?($("."+e).removeClass("yesSel").addClass("sel"),layer.msg("每人最多可选"+i.checkoutNumber+"个座位")):void("function"==typeof i.eventSeatSuccess&&i.eventSeatSuccess($(this),!0)))}}),o.seatBoxWidth=$(".js_seats_wrapper")[0].clientWidth,o.seatBoxHeight=$(".js_seats_wrapper")[0].clientHeight,o.seatBoxElem.css({width:o.seatBoxWidth+i.offset,height:o.seatBoxHeight+i.offset}),l=parseInt($("#seatBox").css("width")),boxHeight=parseInt($("#seatBox").css("height")),o.scaleWidth=l/(o.seatBoxWidth+i.offset).toFixed(1),o.scaleHeight=boxHeight/(o.seatBoxHeight+i.offset).toFixed(1),o.scale=o.scaleWidth,o.minScale=o.scaleWidth>o.scaleHeight?o.scaleHeight:o.scaleWidth,(a=new IScroll("#seatBox",{zoom:!0,scrollX:!0,scrollY:!0,mouseWheel:!0,wheelAction:"zoom",zoomMin:o.scale,tap:!0})).zoom(o.scale,0,0,300),a.scrollTo(0,0,100),function(){var e=$("<div class='create-thumbnail js_thumbnail_box'>"),s=e.append($(".js_thumbnail").clone());s.css("transform","scale("+i.thumbnailRank+")"),$(".js_thumbnail").append(s);var t=$("<div class='visible-area'>").css({width:l,height:boxHeight});e.find(".seat-box").append(t),o.maxScrollY=a.maxScrollY,o.maxScrollX=a.maxScrollX,o.scrollerHeight=a.scrollerHeight,o.scrollerWidth=a.scrollerWidth,a.on("scrollEnd",function(){var e=a.x/a.maxScrollX;e=e||0;var s=a.y/a.maxScrollY;if($(".js_thumbnail_box").find(".seats-list").css("top",o.maxScrollY*s),t.show(0).css({left:Math.abs(o.scaleWidth/a.scale*a.x),top:Math.abs(o.scaleWidth/a.scale*a.y-o.maxScrollY*s),"border-width":i.thumbnailWidth*a.scale*i.thumbnailWidth}),!i.thumbnailLongShow){if(1==++n)return $(".js_thumbnail_box").hide();c&&(clearTimeout(c),c=0),$(".js_thumbnail_box").show(),c=setTimeout(function(){$(".js_thumbnail_box").hide()},3e3)}}),a.on("zoomEnd",function(){if(o.scaleWidth>a.scale)return t.hide();t.show(0).css({transform:"scale("+o.scaleWidth/a.scale+")"}),a._events.scrollEnd[0]()})}()},$.fn.seatCreate({data:seatData,offset:30,tableWidth:150,tableHeight:150,isCheckout:!0,checkoutNumber:10,isThumbnail:!0,thumbnailRank:.3,thumbnailLongShow:!1,thumbnailWidth:3,eventSeatSuccess:function(e,s){console.log(e),s?$(".js_selected_seat").append('<span class="js_selected_item js_selected_'+e.data("seat")+' css-selected-item">'+e.data("seat")+"</span>"):$(".js_selected_"+e.data("seat")).remove()}}),$(".js_selected_seat").delegate(".js_selected_item","click",function(){$(".seat-"+$(this).text()).click()});