!function(l){l.fn.lucky=function(t){var n={row:7,col:5,depth:6,iconW:30,iconH:30,iconRadius:8,data:personArray},i=l(this),o=l.extend({},n,t),c={WinHeight:l(this).height(),winWidth:l(this).width(),isThisTag:!1,centerX:Math.ceil(o.row/2)-1,centerY:Math.ceil(o.col/2)-1,timer:null,isStop:!1},e=function(){for(var t=0;t<o.depth;t++)a(t)},a=function(t){for(var n="",e=0;e<o.row;e++)for(var a=0;a<o.col;a++)e==c.centerX&&a==c.centerY?c.isThisTag||(n+='<div style="'+r(e,a)+'" class="js_current_dom"></div>',c.isThisTag=!0):n+='<div data-depth="'+t+'" style="'+r(e,a)+'" class="element"></div>';i.append(n)},r=function(t,n){return onlyWidth=c.winWidth/o.row,onlyHeight=c.WinHeight/o.col,onlyCenterW=(c.winWidth/o.row-o.iconW)/2,onlyCenterH=(c.WinHeight/o.col-o.iconH)/2,"position:absolute;width:"+o.iconW+"px;height:"+o.iconH+"px;border-radius:"+o.iconRadius+"px;left:"+(t*onlyWidth+onlyCenterW)+"px;top :"+(n*onlyHeight+onlyCenterH)+"px;"},s=function(){for(var t=0,n=l(".element").length,e=0;e<n;e++){var a=l(".element")[e];o.data[e]?l(a).css("background-image","url("+o.data[e].image+")"):(t>=o.data.length-1?t=1:++t,l(a).css("background-image","url("+o.data[t].image+")"));var i=l(a).attr("data-depth");Transform(a),a.translateZ=200*-i,setTimeout(function(t){var n=Math.floor(3*Math.random())+15;tick(function(){c.isStop||(200<=t.translateZ?t.translateZ=200*-i:t.translateZ+=n)})}(a),200)}var r=l(".js_current_dom")[0];Transform(r),tick(function(){200<=r.translateZ?r.translateZ=0:r.translateZ+=15})};return c.stop=function(){clearInterval(c.timer),c.isStop=!0},c.open=function(){c.timer=setInterval(function(){var t=Math.floor(Math.random()*o.data.length);l(".js_current_dom").css({"background-image":"url("+o.data[t].image+")"})},50),c.isStop=!1},e(),s(),c}}(jQuery);