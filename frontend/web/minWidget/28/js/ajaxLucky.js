$(function(){var c={};function t(i){setTimeout(function(){var e=$('<img class="lucky_icon" />'),t=$('<p class="lucky_userName"></p>'),l=$('<div class="lucky_userInfo"></div>');l.append(e,t),$(".mask").append(l),$(".mask").fadeIn(200),e.attr("src",personArray[c.luckyResult[i]].image),t.text(personArray[c.luckyResult[i]].name),l.animate({left:"50%",top:"50%",height:"200px",width:"200px","margin-left":"-100px","margin-top":"-100px"},1e3,function(){setTimeout(function(){l.animate({height:"100px",width:"100px","margin-left":"100px","margin-top":"-50px"},400,function(){$(".mask").fadeOut(0),e.attr("class","lpl_userImage").attr("style",""),t.attr("class","lpl_userName").attr("style",""),l.attr("class","lpl_userInfo").attr("style",""),$(".lpl_list.active").append(l)})},1e3)})},2500*i),setTimeout(function(){$(".lucky_list").show()},2500)}function i(e,t){t<=e&&$(".lucky_prize_right").removeClass("active"),e<=1&&$(".lucky_prize_left").removeClass("active"),c.luckyPrize=e,$(".lucky_prize_show").hide().eq(e-1).show(),$(".lucky_prize_title").html($(".lucky_prize_show").eq(e-1).attr("alt")),$(".lpl_list").removeClass("active").hide().eq(e-1).show().addClass("active")}c.luckyResult=[],c.luckyPrize="",c.luckyNum=$(".select_lucky_number").val(),$(".select_lucky_number").bind("change",function(){c.luckyNum=$(this).val()}),$.get("/lucky/data",function(e){1==e.res&&(personArray=e.data,function(e,t){var l=1,i=e.length;$(".all_number").html("/"+i);for(var c=0;c<i;c++){var a=new Image;a.onload=function(){a.onload=null,++l,$(".current_number").html(l),l==i&&t(a)},a.src=e[c].image}}(personArray,function(){$(".loader_file").hide()}),c.M=$(".container").lucky({row:7,col:7,depth:6,iconW:30,iconH:30,iconRadius:8,data:personArray}))},"json"),$("#stop").click(function(){c.M.stop(),$(".container").hide(),$(this).hide();for(var e=0;e<c.luckyResult.length;e++)t(e)}),$("#open").click(function(){$(".lucky_list").hide(),$(".container").show(),c.M.open(),$.get("/lucky/index",{lucky_num:c.luckyNum,lucky_prize:c.luckyPrize},function(e){1==e.res&&(c.luckyResult=e.luckyResult,$("#stop").show(500))},"json")}),function(){var e=$(".lucky_prize_picture").attr("data-default"),t=e||1;i(t);var l=$(".lucky_prize_show").length;$(".lucky_prize_left").click(function(){$(".lucky_prize_right").addClass("active"),t<=1||--t,i(t,l)}),$(".lucky_prize_right").click(function(){$(".lucky_prize_left").addClass("active"),l<=t||++t,i(t,l)})}()});