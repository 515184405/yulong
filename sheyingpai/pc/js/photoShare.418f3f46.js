(window.webpackJsonp=window.webpackJsonp||[]).push([["photoShare"],{"0ed0":function(e,t,a){},"379c":function(e,t,a){"use strict";var o=a("9032");a.n(o).a},"3cf1":function(e,t,a){"use strict";var o=a("0ed0");a.n(o).a},"418f":function(e,t,a){"use strict";var o={name:"photoPhotoBg",data:function(){return{}}},i=(a("3cf1"),a("e90a")),s=Object(i.a)(o,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"photoPhotoBg"},[t("div",{staticClass:"photo-content flex x-center y-center"},[this._t("default")],2)])}),[],!1,null,"3a6cb4e2",null);t.a=s.exports},"66fa":function(e,t,a){"use strict";var o=a("d501");a.n(o).a},"7a20":function(e,t,a){e.exports=a.p+"img/cover-top.28f829a4.jpg"},"7cb2":function(e,t,a){"use strict";a.r(t);a("20a5");var o={name:"photoShare",data:function(){return{videoLoading:{status:!1,current:0},topShareImageSettings:{top_image_url:"",link:"",type:"1",video_cover_image:"",video_cover_src:""}}},methods:{handleSuccess:function(e,t){1e5==e.code?this.topShareImageSettings.top_image_url=e.data.fileSrc:this.$Message.error(e.message)},handleVideoImageSuccess:function(e,t){1e5==e.code?(this.$req.delFile({fileSrc:this.topShareImageSettings.video_cover_image}),this.topShareImageSettings.video_cover_image=e.data.fileSrc):this.$Message.error(e.message)},handleVideoSuccess:function(e,t){1e5==e.code?(this.$req.delFile({fileSrc:this.topShareImageSettings.video_cover_src}),this.topShareImageSettings.video_cover_src=e.data.fileSrc,this.videoLoading.status=!1,this.videoLoading.current=0,this.$req.photoliveTopImageCreateUpdate({project_id:this.$route.params.project_id,video_cover_src:e.data.fileSrc})):this.$Message.error(e.message)},handleFormatError:function(e){this.$Notice.warning({title:"图片格式不正确",desc:"图片格式不正确，请上传'jpg','jpeg','png','gif'格式"})},handleVideoFormatError:function(){this.$Notice.warning({title:"视频格式不正确",desc:"视频格式不正确，请上传'mp4','avi'格式"})},handleMaxSize:function(e){this.$Notice.warning({title:"图片尺寸过大",desc:"上传的封面图最大不能超过256kb"})},handleVideoMaxSize:function(e){this.$Notice.warning({title:"视频尺寸过大",desc:"上传的视频最大不能超过200M"})},handleBeforeUpload:function(e){},handleVideoBeforeUpload:function(e){console.log("上传视频前"),this.videoLoading.status=!0},handleVideoProgress:function(e,t,a){var o=parseFloat((e.loaded/e.total*100).toFixed(2));this.videoLoading.current=o},submitStartPageEvent:function(){var e=this;this.$req.photoliveTopImageCreateUpdate(this.topShareImageSettings).then((function(t){1e5==t.code?(e.$Modal.success({title:"消息提示",content:"设置顶部宣传区已设置成功"}),e.topShareImageSettings.id||(e.$emit("getPhotoOne"),e.getPhotoLiveTopImageList())):e.$Message.error(t.message)})).catch((function(t){console.log(t),e.$Message.error("系统异常")}))},getPhotoLiveTopImageList:function(){var e=this;this.$req.photoliveTopImageOne(this.$route.params).then((function(t){console.log(t.data),1e5==t.code?t.data?e.topShareImageSettings=t.data:e.topShareImageSettings.project_id=e.$route.params.project_id:e.$Message.error(t.message)})).catch((function(t){console.log(t),e.$Message.error("系统异常")}))}},components:{photoPhoneBg:a("418f").a},created:function(){this.getPhotoLiveTopImageList()}},i=(a("66fa"),a("379c"),a("e90a")),s=Object(i.a)(o,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"photoShare",staticStyle:{"margin-top":"25px"}},[o("Card",{attrs:{"dis-hover":"",bordered:!1}},[o("p",{staticStyle:{"line-height":"33px",height:"30px"},attrs:{slot:"title"},slot:"title"},[o("Icon",{staticStyle:{"font-size":"20px"},attrs:{type:"md-image"}}),e._v(" 设置顶部宣传区 ")],1),o("div",{staticClass:"flex"},[o("photo-phone-bg",[o("div",{staticClass:"cover-image2"},[[1==e.topShareImageSettings.type&&e.topShareImageSettings.top_image_url?o("img",{staticClass:"cover-top",attrs:{src:e.$oss+e.topShareImageSettings.top_image_url,alt:""}}):(e.topShareImageSettings.video_cover_image||e.topShareImageSettings.video_cover_src)&&2==e.topShareImageSettings.type?[o("video",{staticClass:"cover-top",attrs:{controls:"controls",poster:e.topShareImageSettings.video_cover_image?e.$oss+e.topShareImageSettings.video_cover_image:"",src:e.$oss+e.topShareImageSettings.video_cover_src}})]:o("div",{staticClass:"cover-div flex x-center y-center"},[e._v(" 宣传图设置区域 ")])],o("div",{staticClass:"cover-top-content"},[o("img",{attrs:{src:a("7a20")}})])],2)]),o("div",{staticClass:"flex-item",staticStyle:{"margin-left":"50px","max-width":"800px"}},[o("Form",{attrs:{model:e.topShareImageSettings,"label-width":140}},[[o("FormItem",{attrs:{label:"设置启动页类型："}},[o("RadioGroup",{model:{value:e.topShareImageSettings.type,callback:function(t){e.$set(e.topShareImageSettings,"type",t)},expression:"topShareImageSettings.type"}},[o("Radio",{attrs:{label:"1"}},[o("span",[e._v("顶部宣传图")])]),o("Radio",{attrs:{label:"2"}},[o("span",[e._v("顶部宣传视频")])])],1)],1),"1"==e.topShareImageSettings.type?[o("FormItem",{attrs:{label:"顶部宣传图："}},[e.topShareImageSettings.top_image_url?o("div",{staticClass:"demo-upload-list"},[o("img",{attrs:{src:e.$oss+e.topShareImageSettings.top_image_url}}),o("Icon",{attrs:{type:"md-trash"},nativeOn:{click:function(t){t.stopPropagation(),e.topShareImageSettings.top_image_url=""}}})],1):e._e(),o("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"on-success":e.handleSuccess,accept:".jpg,.jpeg,.png,.gif",format:["jpg","jpeg","png","gif"],"max-size":2048,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,type:"drag",data:{dir:e.$userinfo.id+"/"+e.$route.params.project_id+"/top_image"},action:e.$req.uploadImage()}},[o("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[o("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),o("div",{staticClass:"error",staticStyle:{"line-height":"1.5"}},[o("p",[e._v("1.图片的大小不能超过256kb")]),o("p",[e._v("2.图片的尺寸建议：750*400")])])],1),o("FormItem",{attrs:{label:"设置宣传图链接："}},[o("Input",{attrs:{type:"text"},model:{value:e.topShareImageSettings.link,callback:function(t){e.$set(e.topShareImageSettings,"link",t)},expression:"topShareImageSettings.link"}})],1)]:[o("FormItem",{attrs:{label:"上传视频："}},[e.topShareImageSettings.video_cover_src?o("div",{staticClass:"demo-upload-list"},[o("video",{attrs:{src:e.$oss+e.topShareImageSettings.video_cover_src}}),o("Icon",{attrs:{type:"md-trash"},nativeOn:{click:function(t){t.stopPropagation(),e.topShareImageSettings.video_cover_src=""}}})],1):e._e(),o("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"on-progress":e.handleVideoProgress,"on-success":e.handleVideoSuccess,accept:".mp4,.avi",format:["mp4","avi"],"max-size":204800,"on-format-error":e.handleVideoFormatError,"on-exceeded-size":e.handleVideoMaxSize,"before-upload":e.handleVideoBeforeUpload,type:"drag",data:{dir:e.$userinfo.id+"/"+e.$route.params.project_id+"/video_cover"},action:e.$req.uploadImage()}},[o("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[o("Icon",{attrs:{type:"ios-videocam",size:"20"}})],1)]),o("div",{staticClass:"error",staticStyle:{"line-height":"1.5"}},[o("p",[e._v("1.视频的大小不能超过200M")]),o("p",[e._v("2.视频的格式为后缀名为.map,.avi的文件")]),o("p",[e._v("3.视频上传后将删除原文件")])])],1),o("FormItem",{attrs:{label:"视频封面图："}},[e.topShareImageSettings.video_cover_image?o("div",{staticClass:"demo-upload-list"},[o("img",{attrs:{src:e.$oss+e.topShareImageSettings.video_cover_image}}),o("Icon",{attrs:{type:"md-trash"},nativeOn:{click:function(t){t.stopPropagation(),e.topShareImageSettings.video_cover_image=""}}})],1):e._e(),o("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"on-success":e.handleVideoImageSuccess,accept:".jpg,.jpeg,.png,.gif",format:["jpg","jpeg","png","gif"],"max-size":2048,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,type:"drag",data:{dir:e.$userinfo.id+"/"+e.$route.params.project_id+"/video_cover_image"},action:e.$req.uploadImage()}},[o("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[o("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),o("div",{staticClass:"error",staticStyle:{"line-height":"1.5"}},[o("p",[e._v("1.图片的大小不能超过256kb")]),o("p",[e._v("2.图片的尺寸建议：750*400")])])],1)]],o("FormItem",[o("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.submitStartPageEvent}},[e._v("提 交")])],1)],2)],1)],1)]),o("Modal",{attrs:{closable:!1,"class-name":"vertical-center-modal","footer-hide":!0,"mask-closable":!1},model:{value:e.videoLoading.status,callback:function(t){e.$set(e.videoLoading,"status",t)},expression:"videoLoading.status"}},[o("div",{staticStyle:{"text-align":"center",padding:"20px 0"}},[o("i-circle",{attrs:{percent:e.videoLoading.current,"stroke-color":["#2db7f5","#5cb85c"]}},[o("span",{staticClass:"demo-Circle-inner",staticStyle:{"font-size":"24px"}},[e._v(e._s(e.videoLoading.current)+"%")])]),o("p",{staticStyle:{"margin-top":"15px"}},[e._v(e._s(100==e.videoLoading.current?"视频正在备份，请勿刷新":"视频正在上传中，请稍等..."))])],1)])],1)}),[],!1,null,"74e29619",null);t.default=s.exports},9032:function(e,t,a){},d501:function(e,t,a){}}]);