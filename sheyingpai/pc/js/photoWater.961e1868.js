(window.webpackJsonp=window.webpackJsonp||[]).push([["photoWater"],{"0ed0":function(t,e,r){},"0f87":function(t,e,r){},2710:function(t,e,r){"use strict";var i=r("e66d");r.n(i).a},"292e":function(t,e,r){"use strict";var i=r("9959");r.n(i).a},"3cf1":function(t,e,r){"use strict";var i=r("0ed0");r.n(i).a},"418f":function(t,e,r){"use strict";var i={name:"photoPhotoBg",data:function(){return{}}},n=(r("3cf1"),r("e90a")),a=Object(n.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"photoPhotoBg"},[e("div",{staticClass:"photo-content flex x-center y-center"},[this._t("default")],2)])}),[],!1,null,"3a6cb4e2",null);e.a=a.exports},4365:function(t,e,r){t.exports=r.p+"img/cover-bg.9bc8a960.jpg"},"58f6":function(t,e,r){"use strict";r.r(e);r("ea69");var i,n={name:"photoWater",data:function(){var t=this;return i=function(e,r,i){setTimeout((function(){return e>100?(t.currentSetting.style[t.currentPosition][i]=100,t.$Message.info({content:r+"最大不能超过100",duration:3})):e<0?(t.currentSetting.style[t.currentPosition][i]=0,t.$Message.info({content:r+"最小不能低于0",duration:3})):void 0}),100)},{currentPosition:1,currentSetting:{},currentStyle:{},currentWater:"",uploadList:[]}},components:{photoPhoneBg:r("418f").a},watch:{currentSetting:{handler:function(t,e){var r=t.style[this.currentPosition];i(r.width,"水印大小","width"),i(r.opacity,"水印大小","opacity"),i(r.padding,"水印大小","padding")},deep:!0}},methods:{setAttrValueEvent:function(t){this.currentPosition=t,this.currentStyle=this.currentSetting.style[t]},setWaterImage:function(t){var e=null;this.currentSetting.style[this.currentPosition].imgsrc!=t.imgsrc&&(e=t.imgsrc),this.$set(this.currentSetting.style[this.currentPosition],"imgsrc",e),this.$set(this.currentSetting.style[this.currentPosition],"water_id",e?t.id:null)},menuSelectEvent:function(t){this.currentSetting.type=t},handleSuccess:function(t,e){var r=this;1e5==t.code?this.$req.photoliveWaterArrCreateUpdate({imgsrc:t.data.fileSrc,project_id:this.$route.params.project_id}).then((function(t){1e5==t.code?(r.$Message.success("水印上传成功"),r.currentSetting.water_image.push(t.data)):r.$Message.error(t.message)})):this.$Message.error(t.message)},handleFormatError:function(t){this.$Notice.warning({title:"图片格式不正确",desc:"图片格式不正确，请上传'jpg','jpeg','png','gif'格式"})},handleMaxSize:function(t){this.$Notice.warning({title:"图片尺寸过大",desc:"上传的封面图最大不能超过256kb"})},handleBeforeUpload:function(){var t=this.uploadList.length<5;return t||this.$Notice.warning({title:"水印过多",desc:"水印图片最多不能超过4张"}),t},handleRemove:function(t){var e=this;for(var r in this.currentSetting.style){if(this.currentSetting.style[r].imgsrc==t.imgsrc)return this.$Notice.warning({title:"水印不可删除",desc:"当前水印位置【"+r+"】已使用，不可删除"})}var i=this.currentSetting.water_image.findItem(t.imgsrc);this.currentSetting.water_image.splice(i,1),this.$req.photoliveWaterArrRemove({id:t.id}).then((function(r){1e5==r.code?e.$req.delFile({fileSrc:t.imgsrc}):e.$Message.error(r.message)})).catch((function(t){console.log(t),e.$Message.error("系统异常")}))},submitStartPageEvent:function(){var t=this;console.log(this.currentSetting),this.$req.photoliveWaterCreateUpdate(this.currentSetting).then((function(e){1e5==e.code?(t.$Modal.success({title:"消息提示",content:"相册水印已设置成功"}),t.currentSetting.style[1].id||(t.$emit("getPhotoOne"),t.getWaterConfigInfo())):t.$Message.error(e.message)})).catch((function(e){console.log(e),t.$Message.error("系统异常")}))},getWaterConfigInfo:function(){var t=this;this.$req.photoliveWaterOne(this.$route.params).then((function(e){if(1e5==e.code){for(var r in e.data.style)e.data.style[r].imgsrc&&1==t.currentPosition?(t.currentPosition=r,t.currentStyle=e.data.style[r]):e.data.style[r].project_id=t.$route.params.project_id;"{}"==JSON.stringify(t.currentStyle)&&(t.currentStyle=e.data.style[1]),t.currentSetting=e.data}else t.$Message.error(e.message)})).catch((function(){t.$Message.error("服务器内部错误")}))}},created:function(){this.getWaterConfigInfo()}},a=(r("6afa"),r("2710"),r("e90a")),s=Object(a.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return"{}"!==JSON.stringify(t.currentSetting)?i("div",{staticClass:"photoWater",staticStyle:{"margin-top":"25px"}},[i("Card",{attrs:{"dis-hover":"",bordered:!1}},[i("p",{staticStyle:{"line-height":"33px",height:"30px"},attrs:{slot:"title"},slot:"title"},[i("Icon",{staticStyle:{"font-size":"20px"},attrs:{type:"ios-water"}}),t._v(" 设置水印 ")],1),i("div",{staticClass:"flex x-left"},[i("photo-phone-bg",[i("div",{staticClass:"water-box"},[i("div",{staticClass:"water-image water-location",class:{"water-type":2==t.currentSetting.type}},[i("img",{staticClass:"cover-water",attrs:{src:r("a15b"),alt:""}}),i("div",[t._l(4,(function(e){return[t.currentSetting.style[e].imgsrc?t._e():i("span",{staticClass:"water-biaozhu circle",class:[{active:t.currentSetting.current==e}]},[t._v(t._s(e))]),t.currentSetting.style[e].imgsrc?i("img",{staticClass:"water-biaozhu water-icon",style:{width:t.currentSetting.style[e].width+"%",padding:t.currentSetting.style[e].padding?t.currentSetting.style[e].padding+"px":"",opacity:t.currentSetting.style[e].opacity/100},attrs:{src:t.$oss+t.currentSetting.style[e].imgsrc,alt:""}}):t._e()]}))],2)])])]),i("div",{staticClass:"flex-item",staticStyle:{"margin-left":"50px","max-width":"800px"}},[i("Menu",{staticStyle:{"min-height":"auto"},attrs:{mode:"horizontal",theme:"light","active-name":parseFloat(t.currentSetting.type)},on:{"on-select":t.menuSelectEvent}},[i("MenuItem",{attrs:{name:1}},[t._v(" 普通水印 ")]),i("MenuItem",{attrs:{name:2}},[t._v(" 主办方水印 ")])],1),i("Form",{staticStyle:{"margin-top":"30px"},attrs:{model:t.currentSetting,"label-width":140}},[[i("FormItem",{staticStyle:{width:"300px"},attrs:{label:"设置水印位置："}},[i("div",{staticClass:"water-location flex x-left",staticStyle:{"line-height":"1",padding:"4px 0"}},t._l(4,(function(e){return i("span",{key:e,class:{active:t.currentPosition==e},on:{click:function(r){return t.setAttrValueEvent(e)}}},[t._v(t._s(e))])})),0)]),i("FormItem",{attrs:{label:"上传水印图："}},[t._l(t.currentSetting.water_image,(function(e,r){return i("div",{key:r,staticClass:"demo-upload-list",on:{click:function(i){return t.setWaterImage(e,r)}}},[e.imgsrc?i("img",{attrs:{src:t.$oss+e.imgsrc}}):t._e(),i("div",{staticClass:"demo-upload-list-cover",class:{selected:!!t.currentSetting.style[t.currentPosition].imgsrc&&t.currentSetting.style[t.currentPosition].imgsrc==e.imgsrc}},[i("Icon",{attrs:{type:"md-checkmark"}})],1),i("Icon",{attrs:{type:"md-trash"},nativeOn:{click:function(r){return r.stopPropagation(),t.handleRemove(e)}}})],1)})),i("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{name:"file","show-upload-list":!1,"on-success":t.handleSuccess,accept:".png,.jpg,.jpeg,.gif",format:["jpg","jpeg","png","gif"],"max-size":256,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,type:"drag",data:{dir:t.$userinfo.id+"/"+t.$route.params.project_id+"/water"},action:t.$req.uploadImage()}},[i("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[i("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),i("div",{staticClass:"error",staticStyle:{"line-height":"1.5"}},[i("p",[t._v("1.水印的大小不能超过256kb")]),i("p",[t._v("1.水印建议上传透明的.png格式")])])],2),i("FormItem",{staticStyle:{width:"300px"},attrs:{label:"水印大小（%）："}},[i("Input",{attrs:{type:"number"},model:{value:t.currentStyle.width,callback:function(e){t.$set(t.currentStyle,"width",e)},expression:"currentStyle.width"}},[i("Button",{attrs:{slot:"prepend",type:"primary",icon:"md-remove-circle"},on:{click:function(e){t.currentStyle.width--}},slot:"prepend"}),i("div",{attrs:{slot:"append"},slot:"append"},[i("Button",{attrs:{type:"primary",icon:"md-add-circle"},on:{click:function(e){t.currentStyle.width++}}})],1)],1)],1),null!=t.currentStyle.padding?i("FormItem",{staticStyle:{width:"300px"},attrs:{label:"水印边距（%）："}},[i("Input",{staticClass:"t-c",attrs:{type:"number"},model:{value:t.currentStyle.padding,callback:function(e){t.$set(t.currentStyle,"padding",e)},expression:"currentStyle.padding"}},[i("Button",{attrs:{slot:"prepend",type:"primary",icon:"md-remove-circle"},on:{click:function(e){t.currentStyle.padding--}},slot:"prepend"}),i("div",{attrs:{slot:"append"},slot:"append"},[i("Button",{attrs:{type:"primary",icon:"md-add-circle"},on:{click:function(e){t.currentStyle.padding++}}})],1)],1)],1):t._e(),i("FormItem",{staticStyle:{width:"300px"},attrs:{label:"水印透明度（%）："}},[i("Input",{attrs:{type:"number"},model:{value:t.currentStyle.opacity,callback:function(e){t.$set(t.currentStyle,"opacity",e)},expression:"currentStyle.opacity"}},[i("Button",{attrs:{slot:"prepend",type:"primary",icon:"md-remove-circle"},on:{click:function(e){t.currentStyle.opacity--}},slot:"prepend"}),i("div",{attrs:{slot:"append"},slot:"append"},[i("Button",{attrs:{type:"primary",icon:"md-add-circle"},on:{click:function(e){t.currentStyle.opacity++}}})],1)],1)],1)],i("FormItem",[i("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:t.submitStartPageEvent}},[t._v("提 交")])],1)],2)],1)],1)])],1):t._e()}),[],!1,null,"351cf0f1",null);e.default=s.exports},"5a5a":function(t,e,r){"use strict";r.r(e);var i={name:"photoShare",data:function(){return{photo_cover_image:""}},methods:{handleSuccess:function(t,e){1e5==t.code?this.photo_cover_image=t.data.fileSrc:this.$Message.error(t.message)},handleFormatError:function(t){this.$Notice.warning({title:"图片格式不正确",desc:"图片格式不正确，请上传'jpg','jpeg','png','gif'格式"})},handleMaxSize:function(t){this.$Notice.warning({title:"图片尺寸过大",desc:"上传的封面图最大不能超过256kb"})},handleBeforeUpload:function(t){},handleVideoBeforeUpload:function(t){},submitStartPageEvent:function(){var t=this;this.$req.photoliveCreateUpdate({id:this.$route.params.project_id,cover_image:this.photo_cover_image}).then((function(e){1e5==e.code?(t.$Message.success("设置成功"),t.$emit("getPhotoOne")):t.$Message.error(e.message)})).catch((function(e){console.log(e),t.$Message.error("系统异常")}))},getPhotoliveOne:function(){var t=this;this.$req.photoliveOne({project_id:this.$route.params.project_id,no_other:1}).then((function(e){1e5==e.code?t.photo_cover_image=e.data.cover_image:t.$Message.error(e.message)})).catch((function(e){console.log(e),t.$Message.error("系统异常")}))}},components:{photoPhoneBg:r("418f").a},created:function(){this.getPhotoliveOne()}},n=(r("292e"),r("c247"),r("e90a")),a=Object(n.a)(i,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"photoShare",staticStyle:{"margin-top":"25px"}},[i("Card",{attrs:{"dis-hover":"",bordered:!1}},[i("p",{staticStyle:{"line-height":"33px",height:"30px"},attrs:{slot:"title"},slot:"title"},[i("Icon",{staticStyle:{"font-size":"20px"},attrs:{type:"md-image"}}),t._v(" 设置相册封面 ")],1),i("div",{staticClass:"flex"},[i("photo-phone-bg",[i("img",{staticClass:"cover-top",attrs:{src:r("4365"),alt:""}})]),i("div",{staticClass:"flex-item",staticStyle:{"margin-left":"50px","max-width":"800px"}},[i("Form",{attrs:{"label-width":140}},[i("FormItem",{attrs:{label:"相册封面图："}},[t.photo_cover_image?i("div",{staticClass:"demo-upload-list"},[i("img",{attrs:{src:t.$oss+t.photo_cover_image}}),i("Icon",{attrs:{type:"md-trash"},nativeOn:{click:function(e){e.stopPropagation(),t.photo_cover_image=""}}})],1):t._e(),i("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"on-success":t.handleSuccess,accept:".jpg,.jpeg,.png,.gif",format:["jpg","jpeg","png","gif"],"max-size":256,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,type:"drag",data:{dir:t.$userinfo.id+"/"+t.$route.params.project_id+"/photo_cover_image"},action:t.$req.uploadImage()}},[i("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[i("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),i("div",{staticClass:"error",staticStyle:{"line-height":"1.5"}},[i("p",[t._v("1.图片的大小不能超过256KB")]),i("p",[t._v("2.图片的尺寸建议：400 * 300")]),i("p",[t._v("3.如果不传则直接显示照片直播默认图")])])],1),i("FormItem",[i("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:t.submitStartPageEvent}},[t._v("提 交")])],1)],1)],1)],1)])],1)}),[],!1,null,"1db1aa07",null);e.default=a.exports},"6afa":function(t,e,r){"use strict";var i=r("ed0b");r.n(i).a},9959:function(t,e,r){},a15b:function(t,e,r){t.exports=r.p+"img/water_bg.e387753d.jpg"},c247:function(t,e,r){"use strict";var i=r("0f87");r.n(i).a},e66d:function(t,e,r){},ed0b:function(t,e,r){}}]);