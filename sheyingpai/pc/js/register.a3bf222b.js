(window.webpackJsonp=window.webpackJsonp||[]).push([["register"],{"0798":function(e,t,r){"use strict";var a=r("18e7");r.n(a).a},"18e7":function(e,t,r){},"73cf":function(e,t,r){"use strict";r.r(t);var a=r("e8dc"),o=r("fd03"),s=r("6c7f"),i={name:"register",data:function(){var e=this;return{isAgree:!1,loading:!1,registerWord:"欢迎您注册摄影派网站，祝您在本网站有一个愉快的体验，本站点提供在线云相册，云视频等服务，欢迎您的使用",formValidate:{username:"",sex:"",city:[],password:"",repassword:"",phone:""},ruleValidate:{username:[{required:!0,message:"请选择姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}],city:[{required:!0,type:"array",min:2,message:"请选择举办城市",trigger:"change"},{type:"array",max:3,message:"请选择举办城市",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",min:6,message:"最少填写6个字符",trigger:"blur"}],repassword:[{validator:function(t,r,a){""==r?a(new Error("请输入确认密码")):r!==e.formValidate.password?a(new Error("两次密码输入不一致")):a()},trigger:"blur"}],phone:[{validator:function(e,t,r){if(!t)return r(new Error("手机号不能为空"));/^1\d{10}$/.test(t)?r():r("手机号格式不正确")},trigger:"blur"}]},cityJson:[]}},components:{formCover:a.a},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){if(!t.isAgree)return t.$Message.warning({content:"请阅读服务协议并勾选...",duration:3});t.loading=!0,o.register(t.jsonFormat()).then((function(e){t.loading=!1,1e5==e.code?(t.commonApi.Set_Cookie("Flag","isLogin",.5),localStorage.setItem("photolive:uinfo",s.a.encrypt(JSON.stringify(e.data))),t.$Message.success(e.message),setTimeout((function(){t.$router.push({name:"PhotoList"})}),100),window.location.reload()):t.$Message.error(e.message)})).catch((function(e){t.loading=!1,console.log(e),t.$Message.error("系统异常")}))}else t.$Message.error("Fail!")}))},jsonFormat:function(){var e={};for(var t in this.formValidate)"city"==t?(e.province_id=this.formValidate[t][0],e.city_id=this.formValidate[t][1],e.area_id=this.formValidate[t][2]):e[t]=this.formValidate[t];return e}},created:function(){var e=this;0==this.cityJson.length&&o.getCitys().then((function(t){e.cityJson=t}))}},n=(r("0798"),r("dfdf"),r("e90a")),l=Object(n.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form-cover",{attrs:{wordText:e.registerWord}},[r("template",{slot:"loginForm"},[r("router-link",{staticClass:"login-btn",attrs:{to:{name:"Login"}}},[e._v("登 录")]),r("Form",{ref:"formValidate",staticClass:"form-cover-box",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":100}},[r("h2",{staticClass:"form-title t-c"},[e._v("注册")]),r("FormItem",{attrs:{label:"姓名：",prop:"username"}},[r("Input",{attrs:{size:"large",placeholder:"请填写您的姓名"},model:{value:e.formValidate.username,callback:function(t){e.$set(e.formValidate,"username",t)},expression:"formValidate.username"}})],1),r("FormItem",{attrs:{label:"性别：",prop:"sex"}},[r("RadioGroup",{attrs:{size:"large"},model:{value:e.formValidate.sex,callback:function(t){e.$set(e.formValidate,"sex",t)},expression:"formValidate.sex"}},[r("Radio",{attrs:{label:"男"}},[e._v("男")]),r("Radio",{attrs:{label:"女"}},[e._v("女")])],1)],1),r("FormItem",{attrs:{label:"手机号码：",prop:"phone"}},[r("Input",{attrs:{size:"large",placeholder:"请输入手机号码"},model:{value:e.formValidate.phone,callback:function(t){e.$set(e.formValidate,"phone",t)},expression:"formValidate.phone"}})],1),r("FormItem",{attrs:{label:"所在城市：",prop:"city",placeholder:"请选择所在城市"}},[e.cityJson.length?r("Cascader",{attrs:{transfer:!0,size:"large",data:e.cityJson},model:{value:e.formValidate.city,callback:function(t){e.$set(e.formValidate,"city",t)},expression:"formValidate.city"}}):e._e()],1),r("FormItem",{attrs:{label:"设置密码：",prop:"password"}},[r("Input",{attrs:{size:"large",type:"password",placeholder:"请输入密码"},model:{value:e.formValidate.password,callback:function(t){e.$set(e.formValidate,"password",t)},expression:"formValidate.password"}})],1),r("FormItem",{attrs:{label:"确认密码：",prop:"repassword"}},[r("Input",{attrs:{size:"large",type:"password",placeholder:"请再次输入密码"},model:{value:e.formValidate.repassword,callback:function(t){e.$set(e.formValidate,"repassword",t)},expression:"formValidate.repassword"}})],1),r("FormItem",[r("Checkbox",{model:{value:e.isAgree,callback:function(t){e.isAgree=t},expression:"isAgree"}},[e._v("我已阅读并同意")]),r("span",{staticClass:"xieyi"},[e._v("《平台服务协议》")])],1),r("FormItem",{staticClass:"t-c"},[r("Button",{attrs:{long:"",size:"large",loading:e.loading,type:"primary"},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e.loading?r("span",[e._v("提交中...")]):r("span",[e._v("立即注册")])])],1)],1)],1)],2)}),[],!1,null,"48400ca5",null);t.default=l.exports},"8ec4":function(e,t,r){"use strict";var a=r("929a");r.n(a).a},"929a":function(e,t,r){},"93d9":function(e,t,r){},dfdf:function(e,t,r){"use strict";var a=r("93d9");r.n(a).a},e8dc:function(e,t,r){"use strict";r("b4fb"),r("fe59"),r("ecb4"),r("e35a"),r("0d7a"),r("08ba");var a={name:"cover",props:{width:{type:String,default:"1100px"},height:{type:String,default:"auto"},wordText:{type:String,default:""}},data:function(){return{word:"",tmpWordText:""}},methods:{setKeywordFun:function(){for(var e=this,t=[],r=0,a=this.tmpWordText.length;r<a;r++){var o=this.tmpWordText[r];-1==o.indexOf("<")&&(o=o.split("")),t=t.concat(o)}t.forEach((function(t,r){setTimeout((function(){e.word+=t}),100*r)}))}},created:function(){},mounted:function(){this.tmpWordText=["<h2>","照片直播，巨实惠","</h2></br>",this.wordText,'</br></br><p class="t-r">'," ———————摄影派，记录精彩一刻","</p>"],this.setKeywordFun()}},o=(r("8ec4"),r("e90a")),s=Object(o.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-box"},[t("div",{staticClass:"flex login-box form-cover x-between",style:"width:"+this.width+";minHeight:"+this.height},[t("div",{staticClass:"flex y-center form-name"},[t("div",{domProps:{innerHTML:this._s(this.word)}})]),t("div",{staticClass:"form-right flex y-center"},[this._t("loginForm")],2)])])}),[],!1,null,"3f0991ae",null);t.a=s.exports}}]);